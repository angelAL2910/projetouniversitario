<script type="text/html" id="stepPersons">
    <div class="box_SP col-5 fl" id="addPersonBox" data-bind="with: stepData">
        <div class="ttl">@Globalization.PosSalud.StepPersons.PersonInfoTitle</div>

        <div class="boxCont">
            <div class=" row_A">
                <div class="ckLabel fr">
                    <div class="check_lb">
                        <input type="checkbox" data-bind="checked: newPerson.titular" id="prinTJ">
                        <label for="prinTJ"></label>
                    </div>
                    <span>@Globalization.PosSalud.StepPersons.PrincipalLabel</span>
                </div>
            </div>
            <form data-bind="submit: addPerson" id="addPersonForm">
                <div class="row_A">
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.FirstNameLabel</span>
                        <input name="firstName" type="text" data-bind="value: newPerson.firstName, css: {errorBorder: !newPerson.firstName()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.SecondNameLabel</span>
                        <input name="secondName" type="text" data-bind="value: newPerson.secondName, css: {errorBorder: !newPerson.secondName()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.FirstSurnameLabel</span>
                        <input name="firstSurname" type="text" data-bind="value: newPerson.firstSurname, css: {errorBorder: !newPerson.firstSurname()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.SecondSurnameLabel</span>
                        <input name="secondSurname" type="text" data-bind="value: newPerson.secondSurname, css: {errorBorder: !newPerson.secondSurname()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.RelationshipLabel</span>
                        <select name="relationship" data-bind="options: _.filter($root.relationshipList(), function (p) { return newPerson.titular() ? p.id == 'Mismo' : p.id != 'Mismo'; }), optionsText: 'name', optionsValue: 'id', value: newPerson.relationship, disable: newPerson.titular, css: { errorBorder: !newPerson.relationship() }"></select>
                    </div>
                    
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.StudentLabel</span>
                        <select data-bind="options: _.filter($root.boolList(), function(p){return newPerson.relationship() == 'Hijo' || newPerson.relationship() == 'Hija' ? true : !p.id;}), optionsText: 'name', optionsValue: 'id', value: newPerson.student, disable: newPerson.relationship() != 'Hijo' && newPerson.relationship() != 'Hija', css: {errorBorder: !newPerson.student()}"></select>
                    </div>
                    
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.BirthdateLabel</span>
                        <input id="dateOfBirth" name="dateOfBirth" type="text" data-bind="value: newPerson.dateOfBirth, css: {errorBorder: !newPerson.dateOfBirth()}" placeholder="@Globalization.Global.SelectDate" class="datepicker dateOfBirth" readonly="readonly">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.EmailLabel</span>
                        <input name="email" type="text" data-bind="value: newPerson.email1, css: {errorBorder: !newPerson.email1()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.TelephoneLabel</span>
                        <input name="phoneNumber" type="text" data-bind="value: newPerson.phoneNumber, css: {errorBorder: !newPerson.phoneNumber()}" placeholder="@Globalization.Global.WriteHere">
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.CountryLabel</span>
                        <select name="countryId" data-bind="options: $root.nationalitiesList, optionsText: 'name', optionsValue: 'id', value: newPerson.countryId, optionsCaption: '@Globalization.Global.Select', css: { errorBorder: !newPerson.countryId() }"></select>
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.ProvinceLabel</span>
                        <select name="provinceId" data-bind="options: newPerson.provincesList, optionsText: 'name', optionsValue: 'id', value: newPerson.provinceId, optionsCaption: '@Globalization.Global.Select', css: { errorBorder: !newPerson.provinceId() }"></select>
                    </div>
                    <div class="label_plus_input par">
                        <span>@Globalization.PosSalud.StepPersons.CityLabel</span>
                        <select name="cityId" data-bind="options: _.filter(newPerson.citiesList(), function (c) { return c.id.split('-')[1] == newPerson.provinceId(); }), optionsText: 'name', optionsValue: 'id', value: newPerson.cityId, optionsCaption: '@Globalization.Global.Select', css: { errorBorder: !newPerson.cityId() }"></select>
                    </div>
                    <!-- ko if: newPerson.titular  -->
                    <div class="label_plus_input par doble">
                        <span>@Globalization.PosSalud.StepPersons.AnnualIncomeLabel</span>
                        <select name="income" data-bind="options: $root.incomeList, optionsText: 'name', optionsValue: 'id', value: newPerson.income, optionsCaption: '@Globalization.Global.Select', css: { errorBorder: !newPerson.income() }" title="@Globalization.PosSalud.StepPersons.DollarEquivalent"></select>
                    </div>
                    <!-- /ko -->
                </div>
                <div class="row_A">
                    <input type="submit" class="btn bgreen  fr btn_agregarC" value="@Globalization.PosSalud.StepPersons.AddButton" />
                </div>
            </form>
        </div>

    </div>
    <div class="col-1 fl flecha_comp">
        <div class="arr_comp"></div>
    </div>
    <div class="box_SP col-6 fl" data-bind="with: stepData">
        <div class="ttl">@Globalization.PosSalud.StepPersons.PersonsAddedTitle</div>
        <div class="boxCont PersonData">
            <div class=" tbl data_G conduc_aseg">
                <table>
                    <thead>
                        <tr class="gradient_azul">
                            <th align="center" class="c1"><span>@Globalization.PosSalud.StepPersons.NameAndSurnameLabel</span></th>
                            <th align="center" class="c2"><span>@Globalization.PosSalud.StepPersons.BirthdateLabel</span></th>
                            <th align="center" class="c3"><span>@Globalization.PosSalud.StepPersons.PrincipalLabel</span></th>
                            <th align="center" class="c4" style="width: 32px" >&nbsp;</th>
                            <th align="center" class="c5" style="width: 32px">&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: persons">
                        <tr>
                            <td align="left" class="c1" data-bind="text: toString"></td>
                            <td align="center" class="c2" data-bind="text: dateOfBirth"></td>
                            <td align="center" class="c3">
                                <!-- ko if: titular  -->
                                <i class="icon_checked "></i>
                                <!-- /ko -->
                            </td>
                            <td align="center" class="c4">
                                <a class="grid_icons cazul edit" href="#" data-bind="click: $parent.editPerson"></a>
                            </td>
                            <td align="center" class="c5">
                                <a class="grid_icons cazul delete" href="#" data-bind="click: $parent.removePerson"></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Boton de Funcion -->
    <div class="row_A mT10 mB10 pdR20">
        <a href="index_p2.html" class="btn bgreen fr" data-bind="click: stepData.firstStepAdvance">@Globalization.PosSalud.StepPersons.NextStepLabel</a>
    </div>
</script>
