@model StateTrustGlobal.ViewModels.Vendor
@using StateTrustGlobal.Helpers
@using PagedList;
@using PagedList.Mvc;



<div class="container">
</div>
@using (Html.BeginForm("SaveVendor", "Vendor", FormMethod.Post))
{
    <div class="form-group">
        <div class="container">                
            <br />
            <br />
            <div class="panel panel-primary">
                <div class="panel-heading">
                   @ViewBag.Operacion
                </div>

                <div class="panel-body">
                    <div class="form-group">
                         
                        @Html.LabelFor(m => m.Agent_Code, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Agent_Code, new { @class = "form-control", @disabled = "disabled",@id="AgentCode" })
                            @Html.ValidationMessageFor(m => m.Agent_Code, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <br />
                    <div class="form-group">
                        @Html.LabelFor(m => m.Full_Name, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Full_Name, new { @class = "form-control", @disabled = "disabled", @id="FullName" })
                            @Html.ValidationMessageFor(m => m.Full_Name, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <br />
                    <div class="form-group">
                        @Html.LabelFor(m => m.Agent_Id, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Agent_Id, new { @class = "form-control", @id = "AgentId", @placeholder = "Agent Id" })
                            @Html.ValidationMessageFor(m => m.Agent_Id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <br />
                    <div class="form-group">
                        @Html.LabelFor(m => m.Vendor_Id, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Vendor_Id, new { @class = "form-control", @id = "VendorId", @placeholder = "Vendor GP" })
                            @Html.ValidationMessageFor(m => m.Vendor_Id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <br />
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <button class="btn btn-success btn-sm datos-endosatario" id="btnGuardar" type="button" onclick="Add()">
                                <i class="glyphicon glyphicon-saved"></i><span>&nbsp;&nbsp;@ViewBag.Operacion</span>
                            </button>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 text-right datos-endosatario">
                            <button class="btn btn-danger btn-sm" id="btnCancelar" type="button" onclick="Volver()">
                                <i class="glyphicon glyphicon-ban-circle"></i><span>&nbsp;&nbsp;Cancelar</span>
                            </button>
                        </div>
                    </div>
                    <br />
                    <br /> 
            </div>
        </div>
    </div>
    </div>

}

<script>

   
    function Volver() {
        var url = "/Vendor/Index"
        location.href = url;
    }

    function clearForm() {
         $('#AgentId').val("");
         $('#VendorId').val("");
         $('#AgentCode').val("");
         $('#FullName').val("");
         
    }
    function validate() {
        var a = parseInt($('#AgentId').val());
        var b = $('#VendorId').val();

        if (b == "" || b == null || a==null || a==isNaN ) {
            $('#AgentId').css('border-color', 'Red');
            $('#VendorId').css('border-color', 'Red');

            return false;
        } 
        else 
        {
            return true;
        }
           
    };
    //Validar si los Campos estan como requeridos


    $("#AgentId").keypress(function () {
        $('#AgentId').removeAttr('style');
        $('#VendorId').removeAttr('style');
    });

    $("#VendorId").keypress(function () {
        $('#AgentId').removeAttr('style');
        $('#VendorId').removeAttr('style');
    });
   
    function Add() {
        
        var res = validate();
        if (res == false) {
            alert("Favor de Digitar la Infromación");

        }
        else {
          
            var empObj = {
                Agent_Id :parseInt($('#AgentId').val()),
                Vendor_Id:$('#VendorId').val()
            };
            $.ajax({
                url: "/Vendor/SaveVendor",
                data: JSON.stringify(empObj),
                type: "POST",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    alert("Datos guardados correctamente!!!")
                    clearForm();
                    Volver();
                },
                error: function (errormessage) {

                }
            });
        }
       
    }

</script>