 @model StateTrustGlobal.ViewModels.Vendor
@using StateTrustGlobal.Helpers
@using PagedList;
@using PagedList.Mvc;


@using (Html.BeginForm("SaveVendor", "Vendor", FormMethod.Post))
{
    <div class="form-group">
        <div class="container">
            <br />
            <br />
            <div class="panel panel-info">
                <div class="panel-heading">
                    @ViewBag.Operacion
                </div>
                

                <div class="panel-body">
                    <div class="container">
                        <div class="form-group">
                            @Html.LabelFor(m => m.Agent_Code, new { @class = "col-md-2 control-label" })
                            <div class='input-group date col-sm-3'>
                                @Html.TextBoxFor(m => m.Agent_Code, new { @class = "form-control", @disabled = "disabled", @id = "AgentCode" })
                                @Html.ValidationMessageFor(m => m.Agent_Code, "", new { @class = "text-danger" })
                            </div>
                        </div>
                       
                        <div class="form-group">
                            @Html.LabelFor(m => m.Full_Name, new { @class = "col-md-2 control-label" })
                            <div class='input-group date col-sm-3'>
                                @Html.TextBoxFor(m => m.Full_Name, new { @class = "form-control", @disabled = "disabled", @id = "FullName" })
                                @Html.ValidationMessageFor(m => m.Full_Name, "", new { @class = "text-danger" })
                            </div>
                        </div>
                       
                        <div class="form-group">
                            @Html.LabelFor(m => m.Agent_Id, new { @class = "col-md-2 control-label" })
                            <div class='input-group date col-sm-3'>
                                @Html.TextBoxFor(m => m.Agent_Id, new { @class = "form-control", @disabled = "disabled", @id = "AgentId" })
                                @Html.ValidationMessageFor(m => m.Agent_Id, "", new { @class = "text-danger" })
                            </div>
                        </div>
                         
                        <div class="form-group">
                            @Html.LabelFor(m => m.Unique_Agent_Id, new { @class = "col-md-2 control-label" })
                            <div class='input-group date col-sm-3'>
                                @Html.TextBoxFor(m => m.Unique_Agent_Id, new { @class = "form-control", @disabled = "disabled", @id = "UniqueAgentId" })
                                @Html.ValidationMessageFor(m => m.Unique_Agent_Id, "", new { @class = "text-danger" })
                            </div>
                        </div>
                         
                        <div class="form-group">
                            <span> @Html.Label("Fecha Nacimiento", htmlAttributes: new { @class = "control-label col-md-2" })</span>
                            <div class='input-group date col-sm-3' id='datetimepicker1'>
                                @Html.EditorFor(model => model.Dob, new { htmlAttributes = new { @class = "form-control", @id = "DobId" } })
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                                @Html.ValidationMessageFor(model => model.Dob, "", new { @class = "text-danger" })
                            </div>
                        </div>
                         
                        <div class="form-group">

                            <div class="col-md-4 mb-3">
                                <button class="btn btn-primary" type="button" onclick="Add()">@ViewBag.Operacion</button>

                                <input class="btn btn-success" type="button" onclick="Volver()" value="Volver" />
                            </div>
                        </div>
                        <br />
                        <br />
                    </div>
                  

                </div>
            </div>
            </div>
    </div>
       
}

<script>
    function Volver() {
        var url = "/Vendor/MantenimientoAgente"
        location.href = url;
    }

    function clearForm() {
        $('#AgentId').val("");
        $('#VendorId').val("");
        $('#AgentCode').val("");
        $('#FullName').val("");
        $('#DobId').val("");

    }
    function validate() {
        
        var b = $('#DobId').val();

        if (b == " " || b == null || b=="") {
            $('#DobId').css('border-color', 'Red');
           
            return false;
        }
        else {
            return true;
        }

    };
    //Validar si los Campos estan como requeridos


    $("#DobId").keypress(function () {
        $('#DobId').removeAttr('style');
      
    });

    

    function Add() {

        var res = validate();
        if (res == false) {
            alert("Favor de Digitar la Infromación");

        }
        else {
            var empObj = {
                Dob: new Date($('#DobId').val()),
                Agent_Id: parseInt($('#AgentId').val())

            };
            $.ajax({
                url: "/Vendor/EditarAgent",
                data: JSON.stringify(empObj),
                type: "POST",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (result) {
                    Volver();
                    clearForm();
                },
                error: function (errormessage) {

                }
            });
        }

    }

</script>