@using STL.POS.Frontend.Web.NewVersion.CustomCode;
@model IEnumerable<string>
@{
    Layout = null;
    CommonEnums.RequestType RequestType = ViewBag.RequestType;
}

<div class="head-image mdl-card ">
    <!-- mdl-shadow--2dp -->
    <div class="mdl-card__title mdl-card--expand">
        @if (RequestType == CommonEnums.RequestType.Emision)
        {
            <h1 class="bnn_ttl">Cotización Completada</h1>
        }
        else if (RequestType == CommonEnums.RequestType.PropuestaRecuperacion)
        {
            <h1 class="bnn_ttl">Propuesta Recuperación Completada</h1>
        }
        else if (RequestType == CommonEnums.RequestType.Inclusion || RequestType == CommonEnums.RequestType.Exclusion || RequestType == CommonEnums.RequestType.Cambios)
        {
            <h1 class="bnn_ttl">Movimiento enviado</h1>
        }
    </div>
    <!-- <div class="mdl-card__actions p-0 mb-3"></div> -->
    <div class="alert alert-success text-center border-success  alert-dismissible fade show" role="alert">
        @if (RequestType == CommonEnums.RequestType.Emision)
        {
            <h4 class="alert-heading mt-0 mb-0"> Felicitaciones! La Cotización No. <strong>@ViewBag.QuotationNumber</strong> fue completada.</h4>
        }
        else if (RequestType == CommonEnums.RequestType.PropuestaRecuperacion)
        {
            <h4 class="alert-heading mt-0 mb-0"> Felicitaciones! La Propuesta No. <strong>@ViewBag.QuotationNumber</strong> fue completada.</h4>
        }
        else if (RequestType == CommonEnums.RequestType.Inclusion || RequestType == CommonEnums.RequestType.Exclusion || RequestType == CommonEnums.RequestType.Cambios)
        {
            <h4 class="alert-heading mt-0 mb-0"> Felicitaciones! el caso No. <strong>@ViewBag.QuotationNumber</strong> fue completado.</h4>
        }

        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div>
<div class="mdl-cell mdl-cell--12-col mdl-card w-100 ml-0 mdl-shadow--4dp pago_vw">

    <div class="mdl-cell mdl-cell--12-col ">
        <div class="card mdl-shadow--2dp mdl-cell mdl-cell--12-col float-left">
            <div class="card-header bg-info mdl-color-text--white text-center font-weight-bold">
                @if (RequestType == CommonEnums.RequestType.Exclusion)
                {
                    @Html.Raw("El/Los siguiente(s) vehículo(s) seran excluidos:");
                }
                else if (RequestType == CommonEnums.RequestType.Cambios)
                {
                    @Html.Raw("El/Los siguiente(s) vehículo(s) seran Modificados:");
                }
                else
                {
                    @Html.Raw("El/Los siguiente(s) vehículo(s) requieren inspección:");
                }
            </div>
            @if (RequestType != CommonEnums.RequestType.Exclusion && RequestType != CommonEnums.RequestType.Cambios)
            {
                <ul class="list-group list-group-flush text-danger font-weight-bold">
                    @foreach (var v in Model)
                    {
                        <li class="list-group-item"><i class="material-icons mr-3 float-left">&#xE531;</i>@Html.Raw(v)</li>
                    }
                </ul>
            }
            else if (RequestType == CommonEnums.RequestType.Exclusion)
            {
                <div class="table-responsive">
                    <table class="table table-striped table-light text-center" id="tblVehiclesEx">
                        <thead>
                            <tr class="bg-primary mdl-color-text--white">
                                <th scope="col">Marca</th>
                                <th scope="col">Modelo</th>
                                <th scope="col">Año</th>
                                <th scope="col">Chasis</th>
                                <th scope="col">Placa</th>
                                <th scope="col">Color</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var v in Model)
                            {
                                string[] split = v.Split('|');

                                if (split.Count() > 3)
                                {
                                    <tr>
                                        <td>
                                            @Html.Raw(split[0])
                                        </td>
                                        <td>
                                            @Html.Raw(split[1])
                                        </td>
                                        <td>
                                            @Html.Raw(split[2])
                                        </td>
                                        <td>
                                            @Html.Raw(split[3])
                                        </td>
                                        <td>
                                            @Html.Raw(split[4])
                                        </td>
                                        <td>
                                            @Html.Raw(split[5])
                                        </td>
                                    </tr>

                                }
                            }
                        </tbody>
                    </table>
                </div>
            }
            else if (RequestType == CommonEnums.RequestType.Cambios)
            {
                <div class="table-responsive">
                    <table class="table table-striped table-light text-center" id="tblVehiclesEx">
                        <thead>
                            <tr class="bg-primary mdl-color-text--white">
                                <th scope="col">Marca</th>
                                <th scope="col">Modelo</th>
                                <th scope="col">Año</th>
                                <th scope="col">Chasis Anterior</th>
                                <th scope="col">Chasis Nuevo</th>
                                <th scope="col">Placa Anterior</th>
                                <th scope="col">Placa Nueva</th>
                                <th scope="col">Color Anterior</th>
                                <th scope="col">Color Nuevo</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var v in Model)
                            {
                                string[] split = v.Split('|');

                                if (split.Count() > 3)
                                {
                                    <tr>
                                        <td>
                                            @Html.Raw(split[0])
                                        </td>
                                        <td>
                                            @Html.Raw(split[1])
                                        </td>
                                        <td>
                                            @Html.Raw(split[2])
                                        </td>
                                        <td>
                                            @Html.Raw(split[3])
                                        </td>
                                        <td>
                                            @Html.Raw(split[6])
                                        </td>
                                        <td>
                                            @Html.Raw(split[4])
                                        </td>
                                        <td>
                                            @Html.Raw(split[7])
                                        </td>
                                        <td>
                                            @Html.Raw(split[5])
                                        </td>
                                        <td>
                                            @Html.Raw(split[8])
                                        </td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
        @if (RequestType != CommonEnums.RequestType.Exclusion && RequestType != CommonEnums.RequestType.Cambios)
        {
            <div class="card mdl-shadow--2dp mdl-cell mdl-cell--12-col float-left">
                <table class="table table-responsive-sm table-sm table-striped">
                    <tr role="row" class="odd">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">1</span>
                            Le estaremos contactando en el transcurso de los próximos 30 minutos para coordinar la inspección.
                        </td>
                    </tr>
                    <tr role="row" class="even">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">2</span>
                            Le hemos enviado a su email la copia de la solicitud y cotización de su póliza sujeta a inspección y aprobación de nuestro departamento de suscripción.
                        </td>
                    </tr>

                    <tr role="row" class="odd">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">3</span>
                            Una vez el vehículo sea inspeccionado, podra efectuar el pago de su prima parcial o total.
                        </td>
                    </tr>

                    <tr role="row" class="even">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">4</span>
                            Si desea asistencia o tiene alguna pregunta, por favor llamar a los números&nbsp;<strong>809-565-5591</strong>,&nbsp;<strong>1-809-200-5591</strong>&nbsp;o  enviar correo eléctronico a&nbsp;<a href="mailto:ventas@atlantica.do"><strong>ventas@atlantica.do</strong></a>
                        </td>
                    </tr>

                    <tr role="row" class="odd">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">5</span>
                            Esta cotización y su precio final esta sujeto a un proceso de suscripción.
                        </td>
                    </tr>

                    <tr role="row" class="even" style="display:@(ViewBag.IsFinanced ? "block":"none")">
                        <td class="">
                            <span class="badge badge-primary badge-pill mr-3">6</span>
                            Para proceder con el financiamiento por favor descargar el contrato y enviar con la documentacion de suscripción debidamente firmado.
                            <br />
                            <br />
                            <div class="float-left">
                                <a id="lnkViewAmortizationTable" href="#" onclick="ViewFinancedContract()" class="btn btn-outline-info float-right mr-3">
                                    <i class="fa fa-eye fa-2x fa-fw" aria-hidden="true"></i>
                                    <strong class="x-hide">Ver Contrato de Financiamiento</strong>
                                </a>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        }
    </div>
    <!-- Quitado lo del endoso aclaratorio debido a que ya viene integrado en la cotizacion
    <div class="float-left" style="padding: 12px;">
        <div class="alert alert-danger border-danger float-left show text-center w-100" role="alert">
            <h4 class="alert-heading float-left mb-0 mt-0">Para visualizar los endosos aclaratorios, haga click en el boton ver Cotización </h4>
            <a id=" view_btn" class="btn btn-outline-danger float-right" href="#" onclick="ViewQuotation()">
                <i class="fa fa-2x fa-eye fa-fw" aria-hidden="true"></i>
                <strong class="x-hide">Ver Cotización</strong>
            </a>
        </div>
    </div>
    -->
</div>
@Html.Hidden("hdnQuotId", (object)ViewBag.QuotationId)
@Html.Hidden("isFinancedPolicy", (object)ViewBag.IsFinanced)

