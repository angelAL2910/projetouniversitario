@using STL.POS.Frontend.Web.NewVersion.CustomCode;
@model Quotation.PaymentCheckOut
@{
    CommonEnums.RequestType RequestType = ViewBag.RequestType;
}

<div class="mdl-cell card mdl-cell--12-col ml-0 mr-0 w-100 mdl-shadow--4dp clearfix">
    <div class="mdl-grid">
        <div class="mdl-cell card mdl-cell--4-col lb_azul float-left">
            <div class="card-header  bg-info mdl-color-text--white em1-3"><strong>RESUMEN DE PRIMA</strong></div>
            <div class="card-body">
                <div class="mdl-cell mdl-cell--12-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$3,857.62" style="text-align: right;">
                    <label class="mdl-textfield__label">Total prima neta anual</label>
                </div>

                <div class="mdl-cell mdl-cell--12-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$3,857.62" style="text-align: right;">
                    <label class="mdl-textfield__label">Descuento</label>
                </div>

                <div class="mdl-cell mdl-cell--12-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$3,664.74" style="text-align: right;">
                    <label class="mdl-textfield__label">Prima con descuento</label>
                </div>

                <div class="mdl-cell mdl-cell--12-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$886.36" style="text-align: right;">
                    <label class="mdl-textfield__label">Impuesto</label>
                </div>

                <div class="mdl-cell mdl-cell--12-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$4,251.09" style="text-align: right;">
                    <label class="mdl-textfield__label">Total a pagar</label>
                </div>

                @*@if (RequestType == CommonEnums.RequestType.Inclusion)
                {
                    <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                        @Html.EditorFor(model => model.TotalAnnualPrime, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                        @Html.LabelFor(model => model.TotalAnnualPrime, "Prima neta Anual", htmlAttributes: new { @class = "mdl-textfield__label" })
                    </div>
                }

                <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    @Html.EditorFor(model => model.TotalPrime, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                    @Html.LabelFor(model => model.TotalPrime, RequestType == CommonEnums.RequestType.Emision ? "Prima Total" : "Prima neta a prorrata", htmlAttributes: new { @class = "mdl-textfield__label" })
                </div>

                @if (RequestType == CommonEnums.RequestType.Emision)
                {
                    <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                        @Html.EditorFor(model => model.TotalPrimeToDiscount, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                        @Html.LabelFor(model => model.TotalPrimeToDiscount, "Prima Total a Aplicar Descuento", htmlAttributes: new { @class = "mdl-textfield__label" })
                    </div>
                }

                <div class="mdl-cell mdl-cell--12-col mdl-textfield ">
                    @Html.DropDownListFor(model => model.PaymentFrequencyDropDown, (IEnumerable<SelectListItem>)ViewBag.PaymentFreq, new { id = "paymentFrecuency", @class = "chosen-select-deselect form-control", @data_placeholder = "Frecuencia de Pago" })
                </div>

                @if (@Model.FlotillaDiscount)
                {
                    <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                        @Html.EditorFor(model => model.TotalFlotillaDiscount, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                        @Html.LabelFor(model => model.TotalFlotillaDiscount, "Descuento Flotilla", htmlAttributes: new { @class = "mdl-textfield__label" })
                    </div>
                }

                @if (RequestType == CommonEnums.RequestType.Emision)
                {
                    <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                        @Html.EditorFor(model => model.TotalDiscount, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                        @Html.LabelFor(model => model.TotalDiscount, "Descuento Pago Único", htmlAttributes: new { @class = "mdl-textfield__label" })
                    </div>
                }

                @if (RequestType == CommonEnums.RequestType.Emision && !string.IsNullOrEmpty(Model.couponCode))
                {
                    <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                        @Html.EditorFor(model => model.couponPercentageDiscount, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                        @Html.LabelFor(model => model.couponPercentageDiscount, "Descuento Código Promocional", htmlAttributes: new { @class = "mdl-textfield__label" })
                    </div>
                }

                <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    @Html.EditorFor(model => model.TotalAmountWithDiscount, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                    @Html.LabelFor(model => model.TotalAmountWithDiscount, "Prima Total sin Impuestos", htmlAttributes: new { @class = "mdl-textfield__label" })
                </div>
                <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    @Html.EditorFor(model => model.TotalISC, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled", data_percentage = Model.ISCPercentage } })
                    @Html.LabelFor(model => model.TotalISC, "Impuestos", htmlAttributes: new { @class = "mdl-textfield__label" })
                </div>
                <div class="mdl-cell mdl-cell--6-col float-left mdl-textfield mdl-js-textfield mdl-textfield--floating-label is-dirty">
                    @Html.EditorFor(model => model.Total, new { htmlAttributes = new { @class = "mdl-textfield__input applyCurrency", disabled = "disabled" } })
                    @Html.LabelFor(model => model.Total, "Total", htmlAttributes: new { @class = "mdl-textfield__label" })
                </div>

                @if (RequestType == CommonEnums.RequestType.Inclusion)
                {
                    <div id="DropPaymentFreq">


                    </div>
                }*@
            </div>
        </div>

        <div class="mdl-cell card mdl-cell--8-col lb_azul float-right opagos">
            <div class="card-header  bg-info mdl-color-text--white em1-3"><strong>OPCIONES DE PAGO</strong></div>
            <div class="card-body">
                <table class="mdl-data-table mdl-js-data-table border-0 no-hover">
                    <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric border-0"></th>
                            <th class="border-0">Pago inicial</th>
                            <th class="border-0 text-center">Pago siguiente cada uno</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="mdl-data-table__cell--non-numeric border-0">
                                <label class="pure-material-checkbox">
                                    <input type="checkbox">
                                    <span>Pago único</span>
                                </label>
                            </td>
                            <td class="border-0">
                                <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$4,038.54" style="text-align: right;">
                            </td>
                            <td class="border-0 text-center">
                                <span class="text-box single-line" style="text-align: right;"></span>
                            </td>
                        </tr>

                        <tr>
                            <td class="mdl-data-table__cell--non-numeric border-0">
                                <label class="pure-material-checkbox">
                                    <input type="checkbox">
                                    <span>1 inicial + 4 pagos mensuales</span>
                                </label>
                            </td>
                            <td class="border-0">
                                <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$1,062.77" style="text-align: right;">
                            </td>
                            <td class="border-0 text-center">
                                <span class="text-box single-line">4 cuotas de 797.08</span>
                            </td>
                        </tr>

                        <tr>
                            <td class="mdl-data-table__cell--non-numeric border-0">
                                <label class="pure-material-checkbox">
                                    <input type="checkbox">
                                    <span>1 inicial + 4 pagos mensuales (pagos automáticos)</span>
                                </label>
                            </td>
                            <td class="border-0">
                                <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$1,062.77" style="text-align: right;">
                            </td>
                            <td class="border-0 text-center">
                                <span class="text-box single-line">3 cuotas de 797.08 y la ultima de 627.04</span>
                            </td>
                        </tr>

                        <tr>
                            <td class="mdl-data-table__cell--non-numeric border-0">
                                <label class="pure-material-checkbox">
                                    <input type="checkbox">
                                    <span>1 inicial + 11 pagos mensuales (financiación)</span>
                                </label>
                            </td>
                            <td class="border-0">
                                <input class="mdl-textfield__input text-box single-line" disabled="disabled" id="" name="" type="text" value="RD$685.49" style="text-align: right;">
                            </td>
                            <td class="border-0 text-center">
                                <span class="text-box single-line">11 cuotas de 375.87</span>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <div class="mdl-cell mdl-cell--6-col float-left">
            <div class="input-group">
                @if (RequestType == CommonEnums.RequestType.Emision)
                {
                    <span class="input-group-addon bg-info mdl-color-text--white border-0">Monto Mínimo a Pagar</span>
                }
                else if (RequestType == CommonEnums.RequestType.Inclusion)
                {
                    <span class="input-group-addon bg-info mdl-color-text--white">Monto Mínimo Inicial a Pagar</span>
                }

                <span id="sInitial" class="input-group-addon border border-info">25%</span>
                @Html.EditorFor(model => model.MinimunAmountToPay, new { htmlAttributes = new { @class = "form-control border border-info text-center font-weight-bold text-info applyCurrency", disabled = "disabled" } })
            </div>
        </div>
        <div class="mdl-cell mdl-cell--6-col float-left">
            <div class="input-group">
                @if (RequestType == CommonEnums.RequestType.Emision)
                {
                    <span class="input-group-addon border border-warning bg-warning mdl-color-text--white font-weight-bold">Monto a Pagar</span>
                }
                else if (RequestType == CommonEnums.RequestType.Inclusion)
                {
                    <span class="input-group-addon border border-warning bg-warning mdl-color-text--white font-weight-bold">Monto de Cuotas a Pagar</span>
                }

                @Html.EditorFor(model => model.AmountToPayEnteredByUser, new { htmlAttributes = new { @class = "form-control form-control-lg border border-warning text-center font-weight-bold applyCurrency", disabled = "disabled" } })
            </div>
        </div>

    </div>
</div>

    <div class="mdl-cell card mdl-cell--12-col w-100 ml-0 lb_azul mdl-shadow--4dp" id="addDriverBox">
        <div class="card-header bg-info mdl-color-text--white em1-3"><strong>FORMA DE PAGO</strong></div>
        <div class="card-body">
            <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--12-col-phone float-left">
                <div class="mdl-textfield">
                    <div class="col-md-12 float-left pl-0 mt-2">
                        @Html.DropDownListFor(model => model.PaymentWay, (IEnumerable<SelectListItem>)ViewBag.WayToPay, new { id = "paymentTypeId", @class = "chosen-select-deselect form-control", @data_placeholder = "Forma de Pago" })
                    </div>
                    <div id="divNotifyMessaging" style="display:none;" class="mdl-cell mdl-cell--12-col mdl-textfield ">
                        <label for="Messaging" class="fl mR"><strong>Notificar a Mensajería?</strong></label>
                        @Html.CheckBoxFor(model => model.Messaging, new { @class = "fl mT5" })
                    </div>
                </div>
            </div>
            <div id="divTextCard" style="display:none;" class="mdl-cell mdl-cell--12-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" id="inpTextCard" type="number" name="InpTextCard" disabled="disabled">
                <label class="mdl-textfield__label">Se aceptan pagos de tarjetas Visa, Mastercard y American Express..</label>
            </div>
        </div>
    </div>



    @if (RequestType == CommonEnums.RequestType.Emision)
    {
        <div class="mdl-cell--12-col mt-3 clearfix w-100">
            <div class="alert alert-primary mb-0 float-left border-primary text-center w-100" role="alert">
                Si paga el monto de prima anual 100% se le otorga un descuento del 5% del valor de su prima anual
            </div>
        </div>
    }

    <div class="mdl-cell card w-100 ml-0 mdl-cell--12-col mdl-shadow--4dp mt-3 p-3">
        @if (ViewBag.onlyLoggedUsers == false)
        {
            <!--<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-color-text--white text-capitalize p-0 mb-md-0 float-right ">
                <i class="material-icons">arrow_forward</i>Continuar con un Agente
            </button>
                -->
        }
    </div>

    <footer class="footer_cotiza_atl mdl-mega-footer  mt-3 bg-primary fixed-bottom p-2">
        <div class="container">
            <div class="mdl-mega-footer__top-section">

                <div class="mdl-mega-footer__left-section float-left">
                    @*@if (RequestType == CommonEnums.RequestType.Emision){*@
                    @Ajax.RawActionLink("<i class='material-icons float-left mr-3'>arrow_back</i><strong class='x-hide mt-1 d-block float-left'>Atras</strong>",
                                       "DocumentRequired",
                                              "Home",
                                               null,
                                               new AjaxOptions
                                               {
                                                   InsertionMode = InsertionMode.Replace,
                                                   UpdateTargetId = "dvContainer",
                                                   OnSuccess = "$('#btnDissmisPayment').hide();"
                                               },
                               new { @class = "btn btn-outline-info mb-1 mr-2 float-left" })
                    @*}*@

                    @*@if (RequestType == CommonEnums.RequestType.Inclusion)
                        {
                            @Ajax.RawActionLink("<i class='material-icons float-left mr-3'>arrow_back</i><strong class='x-hide mt-1 d-block float-left'>Atras</strong>",
                                    "InfoAddVehicle",
                                           "Home",
                                            null,
                                            new AjaxOptions
                                            {
                                                InsertionMode = InsertionMode.Replace,
                                                UpdateTargetId = "dvContainer",
                                                OnSuccess = "InitializeVehicle(); $('#btnDissmisPayment').hide();"
                                            },
                            new { @class = "btn btn-outline-info mb-1 mr-2 float-left" })
                        }*@
                </div>

                <div class="mdl-mega-footer__right-section float-right">
                    <ul class="mdl-mega-footer__link-list mdl-color-text--white d-flex justify-content-center x-hide mb-0 mt-2 float-left">
                        <li><!-- <i class="fa fa-phone float-left mr-3"></i> --><strong>Tel: </strong> (809) 565-5591 &nbsp•&nbsp</li>
                        <li class="mr-3"> <!-- <i class="fa fa-envelope float-left mr-3" aria-hidden="true"></i> --> <strong> Email:</strong> ventas@atlantica.do</li>
                    </ul>

                    <a class="btn btn-outline-success mb-1 lh22 float-right" href="#" id="aPagar">
                        <i class="material-icons mr-3 float-left">&#xE8A1;</i>
                        <strong class='x-hide d-block float-left'>PAGAR</strong>
                    </a>

                    @*@Ajax.RawActionLink("<i class=\"material-icons mr-3\">&#xE8A1;</i>PAGAR",
                        "_PaymentCheckoutSave",
                        "Home",
                        null,
                        new AjaxOptions
                        {
                            UpdateTargetId = "divCardnetForm",
                            InsertionMode = InsertionMode.Replace,
                            HttpMethod = "Post",
                            OnBegin = "PaymentCheckoutSave(); return false;",
                            OnSuccess = "PaymentCheckoutSave(); return false;",

                        },
                        new
                        {
                            @class = "mdl-button mdl-button--raised mdl-js-button mb-1 mdl-js-ripple-effect mdl-color-text--white bg-success"
                        }
                        )*@
                </div>
            </div>

        </div>
    </footer>

    <script src="~/js/ControllersJs/_PaymentCheckoutJS.js"></script>
