@using STL.POS.Frontend.Web.NewVersion.CustomCode
@model Tuple<STL.POS.Frontend.Web.NewVersion.CustomCode.QuotationViewModel.Vehicles, STL.POS.Frontend.Web.NewVersion.CustomCode.QuotationViewModel>
@{
    var qtyVehicles = ViewBag.totalVehicles;
    var totalVehiclesCompleted = ViewBag.totalVehiclesCompleted;

    string showOrNot = "";

    if (ViewBag.onlyLoggedUsers == false || ViewBag.isNotLawProduct == false)//es de ley)
    {
        showOrNot = "style='display:none;'";
    }
}
<div class="mdl-grid col-12" id="dvVehicleForm">
    @using (Ajax.BeginForm("SaveInfoVehicle",
                                                                       "Home",
                                                                       new AjaxOptions
                                                                       {
                                                                           InsertionMode = InsertionMode.Replace,
                                                                           UpdateTargetId = "dvVehicleForm",
                                                                           HttpMethod = "Post",
                                                                           OnSuccess = "InitializeVehicle()"
                                                                       },
                                                                       new { @name = "frmVehicle", @id = "frmVehicle" }))
    {
        <!-- Campos -->
        <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left lb_azul">
            <div class="form-material form-material-primary input-group">
                <input type="text" class="form-control" id="vehic" name="vehic" placeholder="" value="@Model.Item1.VehicleDescription" disabled>
                <label for="vehic">Vehículo</label>
            </div>
            <div class="form-material form-material-primary input-group">
                <input type="text" class="form-control" id="tVehi" name="tVehi" placeholder="" value="@Model.Item1.SelectedVehicleTypeName" disabled>
                <label for="tVehi">Tipo</label>
            </div>
            <div class="form-material form-material-primary input-group">
                <input type="text" class="form-control" id="brandName" name="brandName" placeholder="" value="@Model.Item1.VehicleMakeName" disabled>
                <label for="brandName">Marca</label>
            </div>
            <div class="form-material form-material-primary input-group">
                <input type="text" class="form-control" id="modelName" name="modelName" placeholder="" value="@Model.Item1.ModelDesc" disabled>
                <label for="modelName">Modelo</label>
            </div>
            <div class="form-material form-material-primary input-group">
                <input type="text" class="form-control" id="PorcDepMin" name="PorcDepMin" placeholder="" value="@string.Format(System.Globalization.CultureInfo.InvariantCulture,"{0:0,0.00}", Model.Item1.minimumdepreciation)" disabled>
                <label for="PorcDepMin">% Depreciacion Mínima</label>
            </div>
            <div class="mdl-cell  mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left" @Html.Raw(showOrNot)>
                <div class="form-material form-material-primary input-group">
                    <input type="text" class="form-control effectiveDateStart" id="StartDate" name="StartDate" readonly="readonly" placeholder="" value="">
                    <label for="StartDate">Fecha Inicio de Vigencia</label>
                    <span class="input-group-addon"><i class="material-icons">&#xE916;</i></span>
                </div>
            </div>
            <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left" @Html.Raw(showOrNot)>
                <div class="form-material form-material-primary input-group">
                    <input id="EndDate" type="text" class="form-control effectiveDateEnd" readonly="readonly" name="EndDate" value="">
                    <label for="EndDate">Fecha Fin de Vigencia</label>
                    <span class="input-group-addon"><i class="material-icons">&#xE916;</i></span>
                </div>
            </div>

        </div>
        <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left lb_azul">
            <div class="form-material form-material-primary input-group putErrorBorder requeridoB">
                <input type="text" id="chassis" value="@Model.Item1.Chassis" placeholder="Escriba Aquí" class="form-control" name="chassis">
                <label for="chassis">Chasis</label>
            </div>
            <div class="form-material form-material-primary input-group putErrorBorder requeridoB">
                <input type="text" id="placa" placeholder="Escriba Aquí" class="form-control" name="plate" value="@Model.Item1.Plate">
                <label for="placa">Placa</label>
            </div>
            <div class="mdl-cell  mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left">
                <div class="form-material form-material-primary input-group">
                    <input type="text" class="form-control" id="year" name="year" placeholder="" value="@Model.Item1.Year" disabled>
                    <label for="year">Año</label>
                </div>
            </div>
            <div class="mdl-cell   mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left" @Html.Raw(showOrNot)>
                <div class="form-material form-material-primary input-group ">
                    <input id="NumeroFormulario" class="form-control" type="text" value="@Model.Item1.NumeroFormulario" placeholder="Escriba Aquí" name="NumeroFormulario">
                    <label for="NumeroFormulario">Número Formulario</label>
                </div>
            </div>
            <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left putErrorBorder requerido">
                <div class="mdl-textfield ">
                    @Html.DropDownListFor(m => m.Item1.Color, (IEnumerable<SelectListItem>)ViewBag.Colors, "", new { @id = "ddlColor", Name = "ddlColor", @class = "chosen-select-deselect form-control", @data_placeholder = "Color" })
                </div>
            </div>
            <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left putErrorBorder requerido">
                <div class="mdl-textfield ">
                    @Html.DropDownListFor(m => m.Item1.Driver_Id, (IEnumerable<SelectListItem>)ViewBag.Drivers, "", new { @id = "ddlDriver", Name = "ddlDriver", @class = "chosen-select-deselect form-control", @data_placeholder = "Conductor Principal" })
                </div>
            </div>

            @if (ViewBag.APPFULLMODE == true)
            {
                <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left pt-4 putErrorBorder requerido">
                    @Html.MyDropDownListFor(m => m.Item2.PaymentFreqIdSelected, (IEnumerable<SelectListItem>)ViewBag.PaymentFreq, "", new { @id = "ddlPaymentFreq", Name = "ddlPaymentFreq", @class = "chosen-select-deselect form-control", @data_placeholder = "Frecuencia de Pago" }, !(bool)ViewBag.IsFinanced)
                    @Html.Hidden("PaymentFreq", Model.Item2.PaymentFreqIdSelected)
                </div>
            }
            else
            {
                <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left pt-2 putErrorBorder requerido" @Html.Raw(showOrNot)>
                    @Html.MyDropDownListFor(m => m.Item2.PaymentFreqIdSelected, (IEnumerable<SelectListItem>)ViewBag.PaymentFreq, "", new { @id = "ddlPaymentFreq", Name = "ddlPaymentFreq", @class = "chosen-select-deselect form-control", @data_placeholder = "Frecuencia de Pago" }, !(bool)ViewBag.IsFinanced)
                    @Html.Hidden("PaymentFreq", Model.Item2.PaymentFreqIdSelected)
                </div>
            }

            @Html.Hidden("hdnQuotId", (object)ViewBag.QuoId)
            @Html.Hidden("hdnVehicleNumber", Model.Item1.VehicleNumber)
            @Html.Hidden("hdnTotalVehiclesCompleted", totalVehiclesCompleted == null ? 0 : (int)totalVehiclesCompleted)
            @Html.Hidden("hdnVigencyStartDate", Model.Item2.StartDate.GetValueOrDefault().ToString("dd-MMM-yyyy", System.Globalization.CultureInfo.InvariantCulture))
            @Html.Hidden("hdnVigencyEndDate", Model.Item2.EndDate.GetValueOrDefault().ToString("dd-MMM-yyyy", System.Globalization.CultureInfo.InvariantCulture))

            <input type="submit" id="btnSubmitForm" style="display:none" />
            <div class="mdl-cell mt-0 mdl-cell--6-col mdl-cell--12-col-tablet mdl-cell--12-col-phone float-left" @Html.Raw(qtyVehicles > 1 ? "style='display:block;'" : "style='display:none;'")>
                <a id="btnSaveVehicleAndNext" class="mdl-textfield mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-color-text--white text-capitalize p-0 mb-md-0 float-right" onclick="SaveVehicleAndNext()"><i class="material-icons">add</i>Siguiente Vehículo</a>
            </div>
        </div>
        <div class="float-left">
            <a id="lnkViewAmortizationTable" href="#" onclick="ViewFinancedContract()" class="btn btn-outline-info float-right mr-3" style="display:@(ViewBag.IsFinanced ? "block" : "none")">
                <i class="fa fa-eye fa-2x fa-fw" aria-hidden="true"></i>
                <strong class="x-hide">Ver Contrato de Financiamiento</strong>
            </a>
        </div>

    }
</div>