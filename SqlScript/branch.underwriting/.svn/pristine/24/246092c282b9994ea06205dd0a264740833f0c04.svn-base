using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using WEB.NewBusiness.Common;

namespace WEB.NewBusiness.NewBusiness.UserControls.Payment
{
    public partial class PaymentContainer : UC, IUC
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            WUCFormOfPayment.SelectPaymemtFormOfPaymentEvent += new WUCFormOfPayment.SelectPaymemtFormOfPayment(MethodSelectPaymemtForm);
            WUCFormOfPayment.RefreshPaymentInformationsEvent += new WUCFormOfPayment.RefreshPaymentInformations(refreshPayment);
            WUCPayment.PaymentProcessEvent += new WUCPayment.PaymentProcess(PaymentProcess);
        }

        public void ClearData() { }

        protected override void OnPreRender(EventArgs e)
        {
            base.OnPreRender(e);
            Translator(string.Empty);
            

        }

        public void Translator(string Lang)
        {
            if (isChangingLang)
                FillData();
        }

        public void save() { }
        public void edit() { }
        public void PaymentProcess()
        {
            WUCFormOfPayment.FillData();
        }

        public void refreshPayment()
        {
            WUCPayment.FillData();
        }

        public void FillData()
        {
            WUCFormOfPayment.FillData();
            WUCPayment.FillData();
        }

        public void Initialize()
        {
            WUCFormOfPayment.SelectPaymemtFormOfPaymentEvent += new WUCFormOfPayment.SelectPaymemtFormOfPayment(MethodSelectPaymemtForm);
            WUCFormOfPayment.RefreshPaymentInformationsEvent += new WUCFormOfPayment.RefreshPaymentInformations(refreshPayment);
            WUCPayment.PaymentProcessEvent += new WUCPayment.PaymentProcess(PaymentProcess);
            FillData();
            if (ObjServices.IsDataReviewMode && getisView)
                ReadOnlyControls(ObjServices.IsReadOnly);

        }

        /// <summary>
        /// AQUI CAMBIA LA PARTE DECHA DEPENDIENDO EL LA FORMA DE PAGO 
        /// Payment_Source_Id	Payment_Source_Desc
        /// 0	                Other
        /// 1	                ACH Domicile
        /// 2	                Credit Card Domicile
        /// 3	                Check
        /// 4	                Deposit
        /// 5	                Wire
        /// 6	                ACH One Time
        /// 7	                ACH Statetrust Bank Domicile
        /// 8	                ACH  Statetrust Bank One Time
        /// 9	                Credit Card One Time
        /// 10	                Wire Promise
        /// </summary>
        /// <param name="PaymentSourceId"></param>
        public void MethodSelectPaymemtForm(int PaymentSourceId, int PaymentSourceTypeId, int PaymentControlId)
        {
            WUCPaymentInformation.MethodSelectPaymemtForm(PaymentSourceId, PaymentSourceTypeId, PaymentControlId);
        }

        public void ReadOnlyControls(bool isReadOnly)
        {
            WUCFormOfPayment.ReadOnlyControls(isReadOnly);
            WUCPayment.ReadOnlyControls(isReadOnly);
        }
    }
}