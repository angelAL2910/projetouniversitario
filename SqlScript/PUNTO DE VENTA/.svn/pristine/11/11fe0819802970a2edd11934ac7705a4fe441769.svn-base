@using STL.POS.Frontend.Web.NewVersion.CustomCode
@model IEnumerable<Entity.Entities.Quotation>

@{
    ViewBag.title = "HISTORICO DE COTIZACIONES";
    var culture = System.Globalization.CultureInfo.InvariantCulture;
}

<div class="mdl-cell--12-col bg-light mdl-shadow--4dp w-100 float-left mb-3 pd-5" id="DvQuotationSearch">

    @using (Ajax.BeginForm("Index",
                                   "Home",
                                   new AjaxOptions
                                   {
                                       InsertionMode = InsertionMode.Replace,
                                       UpdateTargetId = "DvQuotationSearch",
                                       HttpMethod = "Post"
                                   },
                                   new { @name = "FrmQuotationSearch", @id = "FrmQuotationSearch" }))
    {

        <div id="tableHistory_div" class="table-responsive mdl-cell mdl-cell--12-col float-left mt-3">
            <table id="tableHistory" class="table table-striped table-light text-center float-left w-100" cellspacing="0">
                <thead>
                    <tr class="bg-info mdl-color-text--white">
                        <th scope="col"></th>
                        <th scope="col" style="text-align:center">Tipo Solicitud</th>
                        <th scope="col">No. Cotización</th>
                        <th scope="col">Representante</th>
                        <th scope="col">Nombre Solicitante</th>
                        <th scope="col">Identificación</th>
                        <th scope="col">Fecha Cotización</th>
                        @*<th scope="col">Linea de Negocio</th>*@
                        <th scope="col" class="planTH">Plan</th>
                        @*<th scope="col">Moneda</th>*@
                        <th scope="col">Prima Anual</th>
                        <th scope="col">Impuestos</th>
                        <th scope="col">Total</th>
                        <th scope="col">¿Declinar?</th>
                    </tr>
                    <tr id="filter">
                        <th></th>
                        <th>
                            @Html.DropDownList("RequestTypeId", (SelectList)ViewBag.requestTypeList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Todos" })
                        </th>
                        <th class="ui-front">
                            @Html.DropDownList("quotationId", (SelectList)ViewBag.QuotationListID, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Cotización" })
                        </th>
                        <th class="ui-front"></th>

                        <th>
                            @Html.DropDownList("principalName", (SelectList)ViewBag.principalNameList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Solicitante" })
                        </th>
                        <th>
                            @Html.DropDownList("PrincipalIdentificationNumber", (SelectList)ViewBag.identificationList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Identificación" })
                        </th>
                        <th>
                            @Html.DropDownList("Created", (SelectList)ViewBag.quotationDateList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Fecha Cotización" })
                        </th>
                        @*<th>
                                @Html.DropDownList("BusinessLine", (SelectList)ViewBag.businessLineList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Línea de Negocio" })
                            </th>*@
                        <th>
                            @Html.DropDownList("Product", (SelectList)ViewBag.planList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Plan" })
                        </th>
                        @*<th>
                                @Html.DropDownList("Currency", (SelectList)ViewBag.currencyList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "Moneda" })
                            </th>*@
                        <th class="colSelector">
                            <div class="float-left pl-0 pr-0" style="width: 65px;">@Html.DropDownList("primeOperatorSelected", (SelectList)ViewBag.operatorList, "", new { @class = "chosen-select-deselect form-control", @style = "", @data_placeholder = "" })</div>
                            <div class="float-left pl-0 pr-0" style="width:100px;">
                                @*@Html.DropDownList("annualPrime", (SelectList)ViewBag.annualPrimeList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "" })*@
                                <input type="number" class="form-control w-100 mt-0" id="annualPrime" />
                            </div>
                        </th>
                        <th class="colSelector">
                            <div class="float-left pl-0 pr-0" style="width: 65px;">@Html.DropDownList("taxesOperatorSelected", (SelectList)ViewBag.operatorList, "", new { @class = "chosen-select-deselect form-control", @style = "", @data_placeholder = "" })</div>
                            <div class="float-left pl-0 pr-0" style="width:100px;">
                                <input type="number" class="form-control w-100 mt-0" id="taxes" />
                            </div>
                        </th>

                        <th class="colSelector">
                            <div class="float-left pl-0 pr-0" style="width: 65px;">@Html.DropDownList("totalOperatorSelected", (SelectList)ViewBag.operatorList, "", new { @class = "chosen-select-deselect form-control", @style = "", @data_placeholder = "" })</div>
                            <div class="float-left pl-0 pr-0" style="width:100px;">
                                @*@Html.DropDownList("annualPrime", (SelectList)ViewBag.annualPrimeList, "", new { @class = "chosen-select-deselect form-control", @data_placeholder = "" })*@
                                <input type="number" class="form-control w-100 mt-0" id="total" />
                            </div>
                        </th>
                        <th></th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var row in Model)
                    {
                        <tr>
                            <td><input type='radio' class="myradio" requesttypeid='@row.RequestTypeId' name='quotation' id='@row.Id' /></td>
                            <td class="select-filter" style="text-align:center"><span> @row.RequestTypeDesc</span> </td>
                            <td scope="row">@row.QuotationNumber</td>
                            <td class="select-filter" style="text-align:left"><span>@row.FullName</span> </td>
                            <td class="select-filter" style="text-align:left"><span> @row.PrincipalFullName</span> </td>
                            <td class="select-filter" style="text-align:left"> @row.PrincipalIdentificationNumber</td>
                            <td class="select-filter" style="text-align:left"> @row.Created.ToString("dd-MMM-yyyy")</td>
                            @*<td class="select-filter"> @row.BusinessLineDesc</td>*@
                            <td class="select-filter" style="text-align:left"><span> @row.QuotationProduct</span></td>
                            @*<td class="select-filter"> @row.CurrencySymbol</td>*@
                            <td class="select-filter">@row.TotalPrime.Value.ToString("#,0.00", culture)</td>
                            <td class="select-filter"> @row.TotalISC.Value.ToString("#,0.00", culture)</td>
                            <td class="select-filter" data-discount="@row.TotalDiscount">@row.Total.Value.ToString("#,0.00", culture)</td>
                            <td><input class='chk' type='checkbox' id='@row.Id' /></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    <div class="mdl-cell mdl-cell--12-col p-md-2 mt-3 clearfix float-left">
        <div class="alert alert-primary mb-0 float-left mb-3 border-primary text-center col-md-8 col-sm-12" role="alert">
            La cotizaciónes una vez sean abiertas se actualizarán y podrán cambiar su prima
        </div>
        <a href="#" id="DeclineSelected" class="mdl-cell mdl-button mdl-button--raised mdl-js-button mdl-js-ripple-effect mdl-color-text--white bg-danger float-right">
            <i class="material-icons float-left mt-2 mr-3">&#xE0CC;</i>
            <strong>Declinar Seleccionadas</strong>
        </a>
    </div>
    <footer class="footer_cotiza_atl mdl-mega-footer  mt-3 bg-primary fixed-bottom p-2">
        <div class="container">
            <div class="mdl-mega-footer__top-section">

                <div class="mdl-mega-footer__left-section float-left">
                    @*<a href="index.html" class="mdl-button mdl-button--raised mdl-js-button mb-1 mdl-js-ripple-effect mdl-color-text--white bg-success mr-3 float-left">
                            <i class="material-icons">arrow_back</i>
                            <strong class="x-hide">Atras</strong>
                        </a>*@
                    @if (ViewBag.onlyLoggedUsers == false)
                    {
                        <a href="javascript:void(0)" target="_blank" id="uptocall-mini" class="float-left ml-2 mr-4"><i class="uptocall-mini-phone"></i></a>
                    }

                </div>

                <div class="mdl-mega-footer__right-section float-right">
                    <ul class="mdl-mega-footer__link-list mdl-color-text--white d-flex justify-content-center x-hide mb-0 mt-2 float-left">
                        <li><!-- <i class="fa fa-phone float-left mr-3"></i> --><strong>Tel: </strong> (809) 565-5591 &nbsp•&nbsp</li>
                        <li class="mr-3"> <!-- <i class="fa fa-envelope float-left mr-3" aria-hidden="true"></i> --> <strong> Email:</strong> ventas@atlantica.do</li>
                    </ul>
                    <a id="ContinueFromHistory" class="btn btn-outline-success mb-1 lh22  float-right " href="javascript:void(0);">
                        <strong class="x-hide d-block float-left mr-2">Continuar</strong>
                        <i class="material-icons x-block xl-hide float-left mt-1">&#xE8CC;</i>
                        <i class="material-icons float-right ml-2">arrow_forward</i>
                    </a>
                    <a id="RefreshHistory" class="btn btn-outline-success mb-1 lh22  float-right" href="javascript:void(0);">
                        <strong class="x-hide d-block float-left mr-2">Actualizar Datos</strong>
                        <i class="material-icons float-right ml-2">&#xE923;</i>
                        @*<i class="material-icons float-right mt-2">arrow_forward</i>*@
                    </a>
                </div>
            </div>

        </div>
    </footer>
</div>